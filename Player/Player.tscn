[gd_scene load_steps=15 format=3 uid="uid://xj4im0umqm43"]

[ext_resource type="Script" path="res://Player/Player.gd" id="1_dgsno"]
[ext_resource type="PackedScene" uid="uid://ditllddlclp58" path="res://Abilities/Fireball/Fireball.tscn" id="3_lujqw"]
[ext_resource type="PackedScene" uid="uid://10fnp841kyh0" path="res://Abilities/Repulsor/Repulsor.tscn" id="4_hgjck"]
[ext_resource type="PackedScene" uid="uid://vyws3rynag82" path="res://UI/StartMenu.tscn" id="7_tkjxb"]
[ext_resource type="PackedScene" uid="uid://d0s3wpnpk3edg" path="res://Assets/Models/Mage.glb" id="8_fecxb"]
[ext_resource type="PackedScene" uid="uid://ctsn12omgsav2" path="res://UI/GUI.tscn" id="8_syr4s"]
[ext_resource type="Script" path="res://Abilities/IceBlock/IcePathAbility.gd" id="9_fbuvs"]
[ext_resource type="Script" path="res://Player/Repulse.gd" id="10_lhiaj"]
[ext_resource type="PackedScene" uid="uid://ei8us77jw750" path="res://Abilities/GrappleHook/GrappleHook.tscn" id="13_j58rf"]

[sub_resource type="CapsuleMesh" id="CapsuleMesh_nppyd"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_46n6l"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_ihtos"]
cull_mode = 2

[sub_resource type="PlaneMesh" id="PlaneMesh_ai8qj"]
size = Vector2(2, 0.1)
subdivide_width = 20
subdivide_depth = 1

[sub_resource type="BoxMesh" id="BoxMesh_asw78"]
size = Vector3(0.5, 0.2, 0.5)

[node name="Player" type="CharacterBody3D"]
collision_layer = 3
collision_mask = 3
floor_constant_speed = true
script = ExtResource("1_dgsno")
cam_sensitivity = 2.5
fall_multiplier = 3.0
fireball_scene = ExtResource("3_lujqw")

[node name="MeshInstance3D" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
mesh = SubResource("CapsuleMesh_nppyd")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
shape = SubResource("CapsuleShape3D_46n6l")

[node name="CameraPivot" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.5, 0)

[node name="Camera3D" type="Camera3D" parent="CameraPivot"]
cull_mask = 1048569
current = true

[node name="Arms" parent="CameraPivot/Camera3D" instance=ExtResource("8_fecxb")]
transform = Transform3D(-0.5, 0, -7.54979e-08, 0, 0.5, 0, 7.54979e-08, 0, -0.5, 0, -0.807, 0)
visible = false

[node name="Skeleton3D" parent="CameraPivot/Camera3D/Arms/Armature" index="0"]
bones/1/rotation = Quaternion(0.112512, -0.086836, 0.979106, -0.145439)
bones/2/rotation = Quaternion(0.16163, 0.0448833, -0.0792867, 0.982637)
bones/3/rotation = Quaternion(0.0448281, 0.152118, 0.0852153, 0.983661)
bones/4/rotation = Quaternion(0.0551694, 0.736926, 0.0246305, 0.673268)
bones/5/rotation = Quaternion(0.0706886, -0.0708155, 0.0588692, 0.993239)
bones/6/rotation = Quaternion(0.102678, -0.0496014, -0.0861414, 0.989736)
bones/7/rotation = Quaternion(0.111565, -0.0694614, -0.0404495, 0.990501)
bones/9/rotation = Quaternion(0.134577, 0.0026261, 0.0373942, 0.990194)
bones/11/rotation = Quaternion(-0.0100172, 0.711261, -0.102394, 0.695359)
bones/12/rotation = Quaternion(0.0308064, -0.0650569, 0.104292, 0.991938)
bones/13/rotation = Quaternion(0.116749, -0.0884731, -0.0242303, 0.988916)
bones/14/rotation = Quaternion(0.0538609, -0.0464703, -0.0302656, 0.997007)
bones/15/rotation = Quaternion(-0.0645806, 0.671277, -0.159855, 0.720877)
bones/16/rotation = Quaternion(0.0992507, -0.0753978, 0.111819, 0.985881)
bones/17/rotation = Quaternion(0.0714277, -0.0475869, -0.0287658, 0.995895)
bones/18/rotation = Quaternion(0.147327, -0.0882315, -0.0648831, 0.983006)
bones/20/rotation = Quaternion(0.0800183, -0.0552841, 0.00801915, 0.995227)
bones/21/rotation = Quaternion(0.0871638, -0.00963076, -0.0249, 0.995836)
bones/22/rotation = Quaternion(0.0346014, -0.0133634, -0.0034235, 0.999306)
bones/23/rotation = Quaternion(0.0790026, 0.658179, -0.0503077, 0.747013)
bones/24/rotation = Quaternion(-0.247302, 0.0831293, 0.91804, 0.298552)
bones/25/rotation = Quaternion(0.498761, -0.0379398, 0.244663, 0.830625)
bones/26/rotation = Quaternion(0.152273, 0.124583, -0.0747163, 0.977604)
bones/27/position = Vector3(0.00972709, 0.144371, 0.0688793)
bones/27/rotation = Quaternion(0.0768354, -0.737337, -0.000871904, 0.67114)
bones/28/rotation = Quaternion(0.506187, 0.0371331, -0.0842707, 0.857493)
bones/29/rotation = Quaternion(0.533258, 0.0828097, 0.0549836, 0.840093)
bones/30/rotation = Quaternion(0.541554, 0.0802103, 0.00522999, 0.836814)
bones/31/rotation = Quaternion(-0.0924259, -0.83218, -0.380755, 0.392377)
bones/33/rotation = Quaternion(0.453253, -0.1583, -0.0224666, 0.876925)
bones/34/position = Vector3(0.0305597, 0.148367, 0.0143031)
bones/34/rotation = Quaternion(0.0123945, -0.707592, 0.12526, 0.69532)
bones/35/rotation = Quaternion(0.46991, 0.0117231, -0.12236, 0.874114)
bones/36/rotation = Quaternion(0.545487, 0.0899944, -0.0177652, 0.833084)
bones/37/rotation = Quaternion(0.492806, 0.0550904, 0.00636716, 0.86837)
bones/38/position = Vector3(0.0151822, 0.140645, -0.0376914)
bones/38/rotation = Quaternion(-0.00582229, -0.656077, 0.213843, 0.72374)
bones/39/rotation = Quaternion(0.528471, 0.0176224, -0.133708, 0.838171)
bones/40/rotation = Quaternion(0.508033, 0.0554211, 0.00452687, 0.859541)
bones/41/rotation = Quaternion(0.57022, 0.107907, 0.0187296, 0.814159)
bones/42/position = Vector3(-0.02413, 0.105444, -0.0762576)
bones/42/rotation = Quaternion(-0.0149486, -0.616097, 0.255991, 0.744761)
bones/43/rotation = Quaternion(0.515424, 0.045907, -0.0318306, 0.855112)
bones/44/rotation = Quaternion(0.522092, 0.0197239, 0.0179925, 0.852471)
bones/45/rotation = Quaternion(0.476592, 0.0134878, -0.00289492, 0.879016)
bones/46/rotation = Quaternion(0.403829, -0.566681, 0.338532, 0.633397)
bones/47/position = Vector3(0.910733, -0.360709, -1.46432)
bones/48/position = Vector3(1.28185, -0.657433, -0.0866359)
bones/48/rotation = Quaternion(-0.217899, 0.245366, 0.943695, -0.0418897)
bones/49/position = Vector3(-0.727681, 0.314873, -1.01824)
bones/50/position = Vector3(-1.62287, 0.242252, 0.9848)
bones/50/rotation = Quaternion(0.977435, 0.0271481, 0.136536, 0.158878)
bones/51/position = Vector3(-1.64465, 0.349859, 1.31253)

[node name="MageStaff" parent="CameraPivot/Camera3D/Arms/Armature/Skeleton3D" index="0"]
layers = 2

[node name="Arms" parent="CameraPivot/Camera3D/Arms/Armature/Skeleton3D" index="1"]
layers = 2

[node name="BoneAttachment3D" type="BoneAttachment3D" parent="CameraPivot/Camera3D/Arms/Armature/Skeleton3D" index="2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.64465, 0.349859, 1.31253)
bone_name = "Staff"
bone_idx = 51

[node name="SoftBody3D" type="SoftBody3D" parent="CameraPivot/Camera3D/Arms/Armature/Skeleton3D/BoneAttachment3D"]
transform = Transform3D(-9.74407e-08, 0.375707, 0.926739, -1, -4.37114e-08, -8.74228e-08, 7.66369e-09, -0.926739, 0.375707, -0.0458775, -0.54877, 0.00830865)
layers = 2
material_override = SubResource("StandardMaterial3D_ihtos")
mesh = SubResource("PlaneMesh_ai8qj")
skeleton = NodePath("")
pinned_points = [65, 43, 21]
attachments/0/point_index = 65
attachments/0/spatial_attachment_path = NodePath("..")
attachments/0/offset = Vector3(-0.0458775, -0.54877, 0.00830865)
attachments/1/point_index = 43
attachments/1/spatial_attachment_path = NodePath("..")
attachments/1/offset = Vector3(-0.0458775, -0.54877, 0.00830865)
attachments/2/point_index = 21
attachments/2/spatial_attachment_path = NodePath("..")
attachments/2/offset = Vector3(-0.0458775, -0.54877, 0.00830865)

[node name="AnimationPlayer" parent="CameraPivot/Camera3D/Arms" index="2"]
playback_default_blend_time = 0.1

[node name="Visor" type="MeshInstance3D" parent="CameraPivot/Camera3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.4)
layers = 4
mesh = SubResource("BoxMesh_asw78")

[node name="Raycast3D" type="RayCast3D" parent="CameraPivot/Camera3D"]
target_position = Vector3(0, 0, -20)
hit_back_faces = false
collide_with_areas = true

[node name="ThirdPersonCam" type="Camera3D" parent="CameraPivot/Camera3D"]
transform = Transform3D(1, -3.48787e-16, 3.48787e-16, 3.48787e-16, 1, -3.48787e-16, -3.48787e-16, 3.48787e-16, 1, 1.08984, 0, 1.56731)

[node name="RemoteTransform3D" type="RemoteTransform3D" parent="CameraPivot/Camera3D"]
remote_path = NodePath("../../../ArmViewport/SubViewport/ArmsCamera")

[node name="GrappleHook" parent="." instance=ExtResource("13_j58rf")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)

[node name="Repulse" type="Node" parent="."]
script = ExtResource("10_lhiaj")
repulsor_scene = ExtResource("4_hgjck")

[node name="CenterOfMass" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)

[node name="InfoLabel" type="Label" parent="."]
offset_right = 102.0
offset_bottom = 23.0
text = "Hello, testing"

[node name="ArmViewport" type="SubViewportContainer" parent="."]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
stretch = true

[node name="SubViewport" type="SubViewport" parent="ArmViewport"]
transparent_bg = true
handle_input_locally = false
canvas_cull_mask = 4293918722
size = Vector2i(1152, 648)
render_target_update_mode = 4

[node name="ArmsCamera" type="Camera3D" parent="ArmViewport/SubViewport"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.5, 0)
cull_mask = 2

[node name="GUI" parent="." instance=ExtResource("8_syr4s")]

[node name="StartMenu" parent="." instance=ExtResource("7_tkjxb")]
visible = false

[node name="IcePathAbility" type="Node" parent="."]
script = ExtResource("9_fbuvs")

[editable path="CameraPivot/Camera3D/Arms"]
[editable path="GUI"]
[editable path="StartMenu"]
